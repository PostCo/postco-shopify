{"version":3,"sources":["../src/index.js"],"names":["document","addEventListener","console","log","childResizeCallback","height","getElementById","childNodes","style","agentSelectionCallback","agent","address_params","param","step","checkout","shipping_address","company","address1","address2","city","zip","province","state","country","attr","val","id","agentRemovalCallback","prepend","containerElement","containerElementWidth","offsetWidth","apiToken","getAttribute","window","PostCo","create","tag","url","singleton","props","type","required","onChildResize","onAgentSelection","onAgentRemoval","dimensions","width","contexts","iframe","lightbox","popup","defaultContext","render"],"mappings":";;AAAA;;;;AACA;;;;;;AAEAA,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAW;AACvDC,UAAQC,GAAR,CAAY,iEAAZ;;AAEA,MAAMC,sBAAsB,SAAtBA,mBAAsB,CAASC,MAAT,EAAiB;AAC3CL,aAASM,cAAT,CAAwB,yBAAxB,EAAmDC,UAAnD,CAA8D,CAA9D,EAAiEC,KAAjE,CAAuEH,MAAvE,GAAmFA,MAAnF;AACD,GAFD;;AAIA,MAAMI,yBAAyB,SAAzBA,sBAAyB,CAASC,KAAT,EAAgB;AAC7C,QAAMC,iBAAiB,iBAAEC,KAAF,CAAQ;AAC7BC,YAAM,qBADuB;AAE7BC,gBAAU;AACRC,0BAAkB;AAChBC,mBAASN,MAAMM,OADC;AAEhBC,oBAAUP,MAAMO,QAFA;AAGhBC,oBAAUR,MAAMQ,QAHA;AAIhBC,gBAAMT,MAAMS,IAJI;AAKhBC,eAAKV,MAAMU,GALK;AAMhBC,oBAAUX,MAAMY,KANA;AAOhBC,mBAASb,MAAMa;AAPC;AADV;AAFmB,KAAR,CAAvB;;AAeA,0BAAE,qBAAF,EAAyBC,IAAzB,CAA8B,QAA9B,EAAwC,UAAUb,cAAlD;AACA,0BAAE,qBAAF,EAAyBc,GAAzB,CAA6Bf,MAAMgB,EAAnC;AACD,GAlBD;;AAoBA,MAAMC,uBAAuB,SAAvBA,oBAAuB,GAAW;AACtC,0BAAE,qBAAF,EAAyBH,IAAzB,CAA8B,QAA9B,EAAwC,OAAxC;AACA,0BAAE,qBAAF,EAAyBC,GAAzB,CAA6B,EAA7B;AACD,GAHD;;AAKA,wBAAE,qBAAF,EAAyBG,OAAzB;;AAEA,MAAMC,mBAAmB7B,SAASM,cAAT,CAAwB,yBAAxB,CAAzB;AACA,MAAMwB,wBAAwBD,iBAAiBE,WAA/C;;AAEA,MAAMC,WAAWH,iBAAiBI,YAAjB,CAA8B,iBAA9B,CAAjB;;AAEAC,SAAOC,MAAP,GAAgB,qBAAWC,MAAX,CAAkB;AAChCC,SAAK,eAD2B;AAEhCC,SAAK,sDAF2B;AAGhCC,eAAW,IAHqB;AAIhCC,WAAO;AACLR,gBAAU;AACRS,cAAM,QADE;AAERC,kBAAU;AAFF,OADL;AAKJC,qBAAe;AACdF,cAAM,UADQ;AAEdC,kBAAU;AAFI,OALX;AASLE,wBAAkB;AAChBH,cAAM,UADU;AAEhBC,kBAAU;AAFM,OATb;AAaLG,sBAAgB;AACdJ,cAAM,UADQ;AAEdC,kBAAU;AAFI;AAbX,KAJyB;AAsBhCI,gBAAY;AACVC,aAAOjB,qBADG;AAEVzB,cAAQ;AAFE,KAtBoB;AA0BhC2C,cAAU;AACRC,cAAQ,IADA;AAERC,gBAAU,KAFF;AAGRC,aAAO;AAHC,KA1BsB;AA+BhCC,oBAAgB;AA/BgB,GAAlB,CAAhB;;AAkCAlB,SAAOC,MAAP,CAAckB,MAAd,CAAqB;AACnBrB,cAAUA,QADS;AAEnBW,mBAAevC,mBAFI;AAGnBwC,sBAAkBnC,sBAHC;AAInBoC,oBAAgBlB;AAJG,GAArB,EAKG,0BALH;;AAOAzB,UAAQC,GAAR,CAAY,mEAAZ;AACD,CAjFD","file":"index.js","sourcesContent":["import xcomponent from 'xcomponent/dist/xcomponent'\nimport $ from 'jquery/dist/jquery'\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  console.log(\"PostCo Shopify Integration Script v.2.0 was loaded successfully\")\n\n  const childResizeCallback = function(height) {\n    document.getElementById('postco-widget-container').childNodes[1].style.height = `${height}px`\n  }\n\n  const agentSelectionCallback = function(agent) {\n    const address_params = $.param({\n      step: 'contact_information',\n      checkout: {\n        shipping_address: {\n          company: agent.company,\n          address1: agent.address1,\n          address2: agent.address2,\n          city: agent.city,\n          zip: agent.zip,\n          province: agent.state,\n          country: agent.country\n        }\n      }\n    })\n\n    $('form.js-postco-cart').attr(\"action\", 'cart?' + address_params)\n    $('#js-postco-agent-id').val(agent.id)\n  }\n\n  const agentRemovalCallback = function() {\n    $('form.js-postco-cart').attr(\"action\", '/cart');\n    $('#js-postco-agent-id').val('')\n  }\n\n  $(\"form.js-postco-cart\").prepend(`<input id=\"js-postco-agent-id\" name=\"attributes[postco-agent-id]\" type=\"hidden\" value=\"\">`)\n\n  const containerElement = document.getElementById(\"postco-widget-container\")\n  const containerElementWidth = containerElement.offsetWidth\n\n  const apiToken = containerElement.getAttribute(\"data-postco-api\")\n\n  window.PostCo = xcomponent.create({\n    tag: 'postco-widget',\n    url: 'https://postco-plugin-staging.herokuapp.com/delivery',\n    singleton: true,\n    props: {\n      apiToken: {\n        type: 'string',\n        required: true\n      },\n       onChildResize: {\n        type: 'function',\n        required: true\n      },\n      onAgentSelection: {\n        type: 'function',\n        required: true\n      },\n      onAgentRemoval: {\n        type: 'function',\n        required: true\n      }\n    },\n    dimensions: {\n      width: containerElementWidth,\n      height: 130\n    },\n    contexts: {\n      iframe: true,\n      lightbox: false,\n      popup: false\n    },\n    defaultContext: 'iframe'\n  })\n\n  window.PostCo.render({\n    apiToken: apiToken,\n    onChildResize: childResizeCallback,\n    onAgentSelection: agentSelectionCallback,\n    onAgentRemoval: agentRemovalCallback\n  }, '#postco-widget-container')\n\n  console.log(\"PostCo Shopify Integration Script v.2.0 was executed successfully\")\n})\n"]}