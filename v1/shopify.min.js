"use strict"
jQuery.loadScript=function(t,e){return e=$.extend(e||{},{dataType:"script",cache:!0,url:t}),jQuery.ajax(e)},jQuery.loadScript("https://cdnjs.cloudflare.com/ajax/libs/remodal/1.1.0/remodal.min.js"),jQuery.loadScript("https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.1/js/standalone/selectize.min.js")(function(){var t=function(){var t="https:"===window.location.protocol?"https:":"http:",e="//query.yahooapis.com/v1/public/yql?q=",n=encodeURIComponent("select * from html where url = ")
return function(o){return t+e+n+"%27"+encodeURIComponent(o)+"%27"}}(),e=function(){return"undefined"!=typeof window.DOMParser?function(t){return(new DOMParser).parseFromString(t,"text/xml")}:"undefined"!=typeof ActiveXObject&&new ActiveXObject("Microsoft.XMLDOM")?function(t){var e=new ActiveXObject("Microsoft.XMLDOM")
return e.async="false",e.loadXML(t),e}:(console.log("inject - no xml parser found."),function(t){return null})}(),n=function(){function t(){var t=new XMLHttpRequest
return"withCredentials"in t}var e=null
return"undefined"!=typeof XMLHttpRequest&&t()?e=function(){return new XMLHttpRequest}:"undefined"!=typeof XDomainRequest?e=function(){return new XDomainRequest}:console.log("inject - cors isn't supported."),e}(),o=function(t,e){var o=n()
null!==o&&(o.open("GET",t,!0),o.onerror=function(){console.log("inject - error making a request for a source's HTML.")},o.onload=function(){e(o.responseText)},o.send(null))},a=function(){return"undefined"!=typeof document.querySelectorAll?function(t){return document.querySelectorAll("["+t+"]")}:function(t){for(var e=[],n=document.getElementsByTagName("*"),o=0,a=n.length;o<a;o++)null!==n[o].getAttribute(t)&&e.push(n[o])
return e}}(),r=function(t,e,n){for(var o=t.getElementsByTagName(n),a=0,r=o.length;a<r;a++)e.push(o[a])
return e},i=function(t,n){var o=e(t)
if(null!==o){var a=o.getElementsByTagName("body")
if(1===a.length){var i=a[0],s=[]
s=r(o,s,"script"),s=r(o,s,"style")
for(var c=0,d=s.length;c<d;c++)s[c].parentNode.removeChild(s[c])
n.innerHTML=i.innerHTML||i.xml||t,initializeSelectize(),initializeRemodal()}else console.log("inject - no body tag found.")}},s="data-pc-src",c=function(e){var n=e.getAttribute(s)
o(t(n),function(t){i(t,e)})}
setTimeout(function(){for(var t=a(s),e=0,n=t.length;e<n;e++)c(t[e])},0)})()
var initializeRemodal=function(){$(".remodal").remodal()},initializeSelectize=function(){var t=document.getElementById("postco-plugin"),e=t.dataset.pcApi,n=t.dataset.pcEnv,o="dev"===n?"https://postco.xyz":"https://postco.com.my"
$("#js-postco-shipping").click(function(){$("#js-postco-widget").hide(),$("#js-postco-fields").attr("disabled",!0)}),$("#js-postco-collect").click(function(){$("#js-postco-widget").show(),$("#js-postco-fields").attr("disabled",!1)}),$("#postco-agent").selectize({preload:!0,valueField:"id",labelField:"name",searchField:["name","address1","address2","zip","city"],render:{option:function(t,e){return'<div data-address1="'+t.address1+'" data-address2="'+t.address2+'" data-city="'+t.city+'" data-zip="'+t.zip+'" data-province="'+t.province+'" data-country="'+t.country+'"><span class="title"><span class="name" style="font-weight:bold;">'+t.name+'</span></span><br><span class="address" style="font-size: small;">'+(t.address1+" "+t.address2+" "+t.zip+" "+t.city)+"</span></div>"}},onItemAdd:function(t,e){var n=e.text(),o=$(".selectize-dropdown-content").find('[data-value="'+t+'"]'),a=$.param({step:"contact_information",checkout:{shipping_address:{company:n,address1:o.data("address1"),address2:o.data("address2"),city:o.data("city"),zip:o.data("zip"),province:o.data("province"),country:o.data("country")}}})
$("form.cart").attr("action","cart?"+a)},load:function(t,n){this.settings.load=null,$.ajax({url:o+"/api/v1/locations",xhrFields:{withCredentials:!0},headers:{Authorization:"Bearer "+e},type:"GET",error:function(){n()},success:function(t){var e=t.data.map(function(t){return{id:t.attributes["agent-id"],name:t.attributes.company,address1:t.attributes.address1,address2:t.attributes.address2,city:t.attributes.city,zip:t.attributes.zip,province:t.attributes.state,country:t.attributes.country}})
n(e)}})}})}
